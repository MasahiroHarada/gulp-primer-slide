<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Gulp Primer</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/gulp.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github-gist.min.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section class="centered">
          <p>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«</p>
          <h1>Gulp.jså…¥é–€</h1>
        </section>
        <section>
          <h2>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ“ãƒ«ãƒ‰</h2>
          <div class="fragment fade-up">
            <ul>
              <li>SCSSã‚’CSSã«å¤‰æ›ã™ã‚‹</li>
              <li>ES2015ã‚’ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«ã™ã‚‹</li>
              <li>EJSã‚’HTMLã«å¤‰æ›ã™ã‚‹</li>
              <li>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åœ§ç¸®ã™ã‚‹</li>
              <li>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹</li>
            </ul>
            <p>etc...</p>
          </div>
        </section>
        <section>
          <h2>ãƒ“ãƒ«ãƒ‰æ–¹æ³•ã¯ã„ã‚ã„ã‚ã‚ã‚‹</h2>
          <ul>
            <li class="fragment fade-up">ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹</li>
            <li class="fragment fade-up">ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒª</li>
            <li class="fragment fade-up">ã‚¨ãƒ‡ã‚£ã‚¿ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³</li>
            <li class="fragment fade-up">ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«</li>
          </ul>
          <p class="fragment fade-in">Gulp.js ã¯ <span class="underlined">ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«</span></p>
        </section>
        <section class="centered">
          <div class="text-large">
            ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã¯<br /><span class="underlined">è¨­å®šã®å…±æœ‰ãŒç°¡å˜</span><br /><span class="underlined">èª°ãŒãƒ“ãƒ«ãƒ‰ã—ã¦ã‚‚åŒã˜çµæœãŒå¾—ã‚‰ã‚Œã‚‹</span>
          </div>
        </section>
        <section>
          <h2>ãƒ‡ãƒ¢ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</h2>
          <pre><code class="hljs shell" data-trim>
$ git clone git@github.com:MasahiroHarada/gulp-primer.git
$ cd gulp-primer
          </code></pre>
        </section>
        <section>
          <section>
            <h2>Demo 1. SCSSã‚’CSSã«å¤‰æ›ã™ã‚‹</h2>
            <pre><code class="hljs shell">$ cd ./1_compile-scss</code></pre>
          </section>
          <section>
              <h2>Gulpã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2>
              <pre><code class="hljs shell" data-trim>
$ npm init --yes
$ npm install --dev gulp gulp-sass dart-sass
              </code></pre>
              <ul>
                <li><code>gulp</code>ï¼šGulpãƒ©ã‚¤ãƒ–ãƒ©ãƒª</li>
                <li><code>gulp-sass</code>ï¼šSassã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚’è¡Œã†Gulpãƒ—ãƒ©ã‚°ã‚¤ãƒ³</li>
                <li><code>dart-sass</code>ï¼šSassã‚³ãƒ³ãƒ‘ã‚¤ãƒ©</li>
              </ul>
            </section>
            <section>
              <h2>gulpfile.js</h2>
              <p>ãƒ“ãƒ«ãƒ‰æ‰‹é †ã‚’è¨˜è¿°ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«</p>
              <pre><code class="hljs javascript" data-trim>
const gulp = require('gulp');
const gulpSass = require('gulp-sass');

// ãƒ“ãƒ«ãƒ‰ã‚¿ã‚¹ã‚¯ã‚’é–¢æ•°ã§è¡¨ç¾ã™ã‚‹
function scss() {
  return gulp.src('src/sass/**/*.scss') // scssãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–å¾—
    .pipe(gulpSass()) // scssã‹ã‚‰cssã¸ã®å¤‰æ›å‡¦ç†
    .pipe(gulp.dest('dist/css')); // cssãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å‡ºåŠ›
}

exports.dev = scss; // åå‰ã‚’ã¤ã‘ã¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
              </code></pre>
            </section>
            <section>
              <h2>Gulpã«ãŠã‘ã‚‹ãƒ“ãƒ«ãƒ‰ã®æ¦‚è¦</h2>
              <img src="img/fig-1.png" alt="">
              <p><code>src</code>ã§ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’å–å¾— â†’ ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ã®å¤‰æ›å‡¦ç†ï¼ˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ï¼‰ã‚’<code>pipe</code>ã§ç¹‹ã â†’ æœ€çµ‚çš„ã«<code>dest</code>ã§å‡ºåŠ›ã€‚</p>
            </section>
            <section>
              <h2>ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œï¼</h2>
              <pre><code class="hljs shell">$ ./node_modules/.bin/gulp dev</code></pre>
              <p><code>dev</code>ã¯ã‚¿ã‚¹ã‚¯ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ãŸåå‰ã€‚</p>
            </section>
            <section>
              <h2>npmã‚¹ã‚¯ãƒªãƒ—ãƒˆ</h2>
              <pre><code class="hljs javascript" data-trim>
"scripts": {
  "start": "gulp dev"
}
              </code></pre>
              <p>npmã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯node_modulesãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ã‚³ãƒãƒ³ãƒ‰æ¢ç´¢ãƒ‘ã‚¹ã«å«ã‚ã¦ãã‚Œã‚‹ã€‚ãªã®ã§ã‚³ãƒãƒ³ãƒ‰ãŒã‚¹ãƒƒã‚­ãƒªã€‚</p>
            </section>
            <section>
              <h2>ã‚‚ã†ä¸€åº¦ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œï¼</h2>
              <pre><code class="hljs shell">$ npm run start</code></pre>
            </section>
        </section>
        <section class="centered">
          <div class="text-large">
            <p><span class="underlined">gulpfile.js</span> ã«ãƒ“ãƒ«ãƒ‰æ‰‹é †ã€<br /><span class="underlined">package.json</span> ã«ä¾å­˜ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚„<br />ãƒ“ãƒ«ãƒ‰ã‚³ãƒãƒ³ãƒ‰ã‚’è¨˜è¿°ã—ã¦ <span class="underlined">Git</span> ã§å…±æœ‰</p>
            <div class="fragment fade-in">
              <p>â†“</p>
              <p>ãƒ“ãƒ«ãƒ‰æ–¹æ³•ã‚’ãƒãƒ¼ãƒ ã§ç°¡å˜ã«å…±æœ‰ã§ãã‚‹ï¼</p>
            </div>
          </div>
        </section>
        <section>
          <section>
            <h2>Demo 2. ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´ã‚’ç›£è¦–ã™ã‚‹</h2>
            <pre><code class="hljs shell" data-trim="">
$ cd ../2_watch-file-changes
$ npm init --yes
$ npm install --dev gulp gulp-sass dart-sass
            </code></pre>
          </section>
          <section>
            <h2>gulpfile.js</h2>
            <pre><code class="hljs javascript" data-trim>
const gulp = require('gulp');
const gulpSass = require('gulp-sass');

function watchFiles(done) {
  // watchã®ç¬¬ä¸€å¼•æ•°ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤‰æ›´ã•ã‚ŒãŸã‚‰
  // ç¬¬äºŒå¼•æ•°ã«æ¸¡ã—ãŸé–¢æ•°ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã€‚
  gulp.watch('src/sass/**/*.scss', scss);

  // åŒæœŸå‡¦ç†ã®å ´åˆã¯ã‚¿ã‚¹ã‚¯ã®ç¬¬ä¸€å¼•æ•°ã«æ¸¡ã£ã¦ãã‚‹
  // ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã‚’å®Ÿè¡Œã—ã¦ã‚¿ã‚¹ã‚¯ã®å®Œäº†ã‚’é€šçŸ¥ã™ã‚‹ã€‚
  done();
}

function scss() {
  return gulp.src('src/sass/**/*.scss')
    .pipe(gulpSass())
    .pipe(gulp.dest('dist'));
}

exports.dev = gulp.series(scss, watchFiles); // ã‚¿ã‚¹ã‚¯ã‚’é †æ¬¡å®Ÿè¡Œ
            </code></pre>
          </section>
          <section>
            <h2>ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œï¼</h2>
            <pre><code class="hljs javascript" data-trim>
"scripts": {
"start": "gulp dev"
}
            </code></pre>
            <pre><code class="hljs shell">$ npm run start</code></pre>
          </section>
        </section>
        <section>
          <section>
            <h2>Demo 3. EJSã‚’HTMLã«å¤‰æ›ã™ã‚‹</h2>
            <pre><code class="hljs shell" data-trim>
$ cd ../3_compile-templates
$ npm init --yes
$ npm install --dev gulp gulp-ejs
            </code></pre>
          </section>
          <section>
            <h2>gulpfile.js</h2>
            <pre><code class="hljs javascript" data-trim>
const gulp = require('gulp');
const gulpEjs = require('gulp-ejs');

function ejs() {
  return gulp.src([
    'src/ejs/**/*.ejs',
    '!src/ejs/**/_*.ejs' // å‡¦ç†é™¤å¤–ãƒ•ã‚¡ã‚¤ãƒ«
  ])
    .pipe(gulpEjs({}, {}, { ext: '.html' }))
    .pipe(gulp.dest('dist'));
}

exports.dev = ejs;
            </code></pre>
          </section>
          <section>
            <h2>ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œï¼</h2>
            <pre><code class="hljs javascript" data-trim>
"scripts": {
"start": "gulp dev"
}
            </code></pre>
            <pre><code class="hljs shell">$ npm run start</code></pre>
          </section>
        </section>
        <section class="centered">
          <div class="text-large">
            ã•ã¾ã–ã¾ãªå¤‰æ›å‡¦ç†ï¼ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’<br />çµ„ã¿åˆã‚ã›ã¦ã‚¿ã‚¹ã‚¯ã‚’ä½œæˆ
          </div>
        </section>
        <section>
          <section>
            <h2>Demo 4. ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã™ã‚‹</h2>
            <pre><code class="hljs shell" data-trim>
$ cd ../4_http-server
$ npm init --yes
$ npm install --dev gulp browser-sync
            </code></pre>
          </section>
          <section>
            <h2>gulpfile.js</h2>
            <pre><code class="hljs javascript" data-trim>
const gulp = require('gulp');
const browserSync = require('browser-sync');

// ãƒ­ãƒ¼ã‚«ãƒ«Webã‚µãƒ¼ãƒãƒ¼ä½œæˆ
const server = browserSync.create();

// ã‚µãƒ¼ãƒãƒ¼å†èµ·å‹•
function reload(done) {
  server.reload();
  done();
}

// ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
function serve(done) {
  server.init({
    server: {
      baseDir: './public'
    }
  });
  done();
}

function watchFiles(done) {
  gulp.watch('./public/**/*.html', reload);
  done();
}

exports.dev = gulp.series(serve, watchFiles);
            </code></pre>
          </section>
          <section>
            <h2>ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œï¼</h2>
            <pre><code class="hljs javascript" data-trim>
"scripts": {
"start": "gulp dev"
}
            </code></pre>
            <pre><code class="hljs shell">$ npm run start</code></pre>
            <p>ğŸ‘‰ <a href="http://localhost:3000">http://localhost:3000</a></p>
          </section>
        </section>
        <section>
          <section>
            <h2>Demo 5. ã‚¿ã‚¹ã‚¯ã‚’çµ„ã¿åˆã‚ã›ã‚‹</h2>
            <pre><code class="hljs shell" data-trim>
$ cd ../5_wiring-up
$ npm init --yes
$ npm install --dev gulp gulp-sass gulp-ejs dart-sass browser-sync
            </code></pre>
          </section>
          <section>
            <h2>gulpfile.js</h2>
            <pre><code class="hljs javascript" data-trim>
const gulp = require('gulp');
const gulpSass = require('gulp-sass');
const gulpEjs = require('gulp-ejs');
const browserSync = require('browser-sync');

const server = browserSync.create();

function reload(done) {
  server.reload();
  done();
}

function serve(done) {
  server.init({
    server: {
      baseDir: './dist'
    }
  });
  done();
}

function scss() {
  return gulp.src('src/sass/**/*.scss')
    .pipe(gulpSass())
    .pipe(gulp.dest('dist/css'));
}

function ejs() {
  return gulp.src([
    'src/ejs/**/*.ejs',
    '!src/ejs/**/_*.ejs'
  ])
    .pipe(gulpEjs({}, {}, { ext: '.html' }))
    .pipe(gulp.dest('dist'));
}

function watchFiles(done) {
  gulp.watch('src/sass/**/*.scss', gulp.series(scss, reload));
  gulp.watch('src/ejs/**/*.ejs', gulp.series(ejs, reload));
  done();
}

exports.dev = gulp.series(
  gulp.pallarel(scss, ejs), // ä¸¦åˆ—å‡¦ç†
  serve,
  watchFiles
);
            </code></pre>
          </section>
          <section>
            <h2>ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œï¼</h2>
            <pre><code class="hljs javascript" data-trim>
"scripts": {
"start": "gulp dev"
}
            </code></pre>
            <pre><code class="hljs shell">$ npm run start</code></pre>
            <p>ğŸ‘‰ <a href="http://localhost:3000">http://localhost:3000</a></p>
          </section>
        </section>
        <section>
          <h2>ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã§ã®è¨­å®šä¾‹</h2>
          <pre><code class="hljs javascript" data-trim>
function scss() {
  return gulp
    .src(config.src)
    .pipe(sassVariables({
      $env: process.env.NODE_ENV
    }))
    .pipe(plumber())
    .pipe(sourcemaps.init())
    .pipe(
      gulpSass({
        outputStyle: 'expanded',
        linefeed: 'crlf'
      }).on('error', gulpSass.logError)
    )
    .pipe(autoprefixer())
    .pipe(cleancss({ compatibility: 'ie9' }))
    .pipe(sourcemaps.write('.'))
    .pipe(gulp.dest(config.dest));
}
          </code></pre>
        </section>
        <section class="centered">
          <div class="text-large">ãŠã—ã¾ã„</div>
        </section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
